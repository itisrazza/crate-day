{"version":3,"sources":["script.ts"],"names":[],"mappings":";AAAA,IAAM,EAAW,GACX,EAAW,EACX,EAAS,IACT,EAAS,GAAK,EACd,EAAO,GAAK,EAQlB,SAAS,EAAY,GACnB,MAAA,IAAA,GAAS,IAAI,MAAO,eAGd,IAAA,EAAgB,IAAI,KAAK,EAAM,EAAU,GACzC,EAAS,EAAW,EAAc,SAIjC,OADU,IAAI,KAAK,EAAM,EAAU,EAAI,GAIhD,SAAS,EAAoB,GACpB,OAAA,EAAY,GAAM,mBAAmB,QAAS,CACnD,QAAS,OACT,IAAK,UACL,MAAO,SAIX,SAAS,EAAc,GACrB,MAAA,IAAA,EAAQ,IAAI,MACN,IAAA,EAAO,IACP,EAAS,EAAK,UAAY,GAAK,EAC/B,EAAM,EAAK,UAAY,GAAK,EAG9B,GAAA,EAAI,UAAY,IAAc,UAAW,CAC3B,EAAK,mBAAmB,QAAS,CAC/C,QAAS,OACT,IAAK,UACL,MAAO,SAEF,MAAA,SAIL,OAAA,EAAI,UAAY,EACX,UAIL,EAAI,UAAY,EAAM,EACjB,QAIF,EAAI,WAAa,GAG1B,SAAS,IACD,IAYF,EAZE,EAAa,IACX,OAAA,GACD,IAAA,SACI,MAAA,wBAAwB,IAAqB,aACjD,IAAA,UACI,MAAA,sCACJ,IAAA,QACI,MAAA,+CAMH,OAAA,GACD,KAAA,EACH,EAAc,6BACX,KAAA,GACH,EAAc,YAGX,YADa,IAAhB,IAA2B,EAAc,aAAe,GACrD,wCAAwC,EAAU,aACvD,GAAK,GAAU,SAInB,IAAM,EAAU,SAAS,eAAe,iBACxC,SAAS,IAEP,QAAQ,IAAI,YACZ,EAAQ,UAAY,IAEtB,IACA,YAAY,EAAe","file":"script.96b3ae86.js","sourceRoot":"../src","sourcesContent":["const DECEMBER = 11;\nconst SATURDAY = 6;\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\n\n/**\n * Retrieves the day crate day will fall on for that year.\n *\n * @param year Year this crate day will occur on. If omitted, will assume current year.\n * @returns Date Crate Day falls on.\n */\nfunction getCrateDay(year?: number): Date {\n  year ??= new Date().getFullYear();\n\n  // get day for 1st of December that year\n  const decemberFirst = new Date(year, DECEMBER, 1);\n  const offset = SATURDAY - decemberFirst.getDay();\n\n  // find the first saturday\n  const crateDay = new Date(year, DECEMBER, 1 + offset);\n  return crateDay;\n}\n\nfunction getCrateDayAsString(year?: number): string {\n  return getCrateDay(year).toLocaleDateString(\"en-NZ\", {\n    weekday: \"long\",\n    day: \"numeric\",\n    month: \"long\",\n  });\n}\n\nfunction getBeerNumber(now?: Date): number | \"before\" | \"morning\" | \"after\" {\n  now ??= new Date();\n  const date = getCrateDay();\n  const midday = date.valueOf() + 12 * HOUR;\n  const end = date.valueOf() + 24 * HOUR;\n\n  // if the date is before it begins, show the normal text\n  if (now.valueOf() < getCrateDay().valueOf()) {\n    const dateStr = date.toLocaleDateString(\"en-NZ\", {\n      weekday: \"long\",\n      day: \"numeric\",\n      month: \"long\",\n    });\n    return \"before\";\n  }\n\n  // if the date falls before 12PM\n  if (now.valueOf() < midday) {\n    return \"morning\";\n  }\n\n  // if the date falls after 12AM\n  if (now.valueOf() > end + HOUR) {\n    return \"after\";\n  }\n\n  // get the beer number\n  return now.getHours() - 11;\n}\n\nfunction getHeading(): string {\n  const beerNumber = getBeerNumber();\n  switch (beerNumber) {\n    case \"before\":\n      return `Crate Day will be on ${getCrateDayAsString()} this year`;\n    case \"morning\":\n      return \"Crate Day will start today at 12 PM\";\n    case \"after\":\n      return \"Crate Day is over &middot; See you next year\";\n    default:\n      break;\n  }\n\n  let extraString: string | undefined;\n  switch (beerNumber) {\n    case 1:\n      extraString = \"Let's get started. Cheers!\";\n    case 12:\n      extraString = \"Last one!\";\n  }\n  if (extraString !== undefined) extraString = \" &middot; \" + extraString;\n  return `Beer number <span class=\"beer-count\">${beerNumber}</span>. ${\n    12 - beerNumber\n  } to go`;\n}\n\nconst heading = document.getElementById(\"crate-day-sub\");\nfunction updateHeading() {\n  // debugger;\n  console.log(\"update !\");\n  heading.innerHTML = getHeading();\n}\nupdateHeading();\nsetInterval(updateHeading, 1000);\n"]}